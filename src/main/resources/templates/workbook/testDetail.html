<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net/nz/thymeleaf/layout"
    layout:decorate="~{layouts/layout}">
<head>
    <title>testing</title>
</head>

<div th:if=${session.id} layout:fragment="header">
	<div class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">
		<div class="d-flex">
			<a href="/workbook/" th:attrappend="href=${workbook}" class="float-md-start mb-0 me-4 text-decoration-none btn btn-outline-primary">
				<i class="bi bi-chevron-left"></i>
			</a>
			<h3 class="float-md-end mb-0">
				테스트
			</h3>
		</div>
		<div class="justify-content-between float-md-end">
			<a href="/workbook/" th:attrappend="href=${workbook}" class="btn btn-outline-danger text-decoration-none">
				<i class="bi bi-x-circle"></i> 취소
			</a>
		</div>
	</div>
</div>

<div th:if=${session.id} layout:fragment="toolbar">
	<div class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-1 mb-1 border-bottom">
		<div class="justify-content-between"></div>
		<div class="justify-content-center btn-group">
			<button class="btn btn-secondary">
				<del><i class="bi bi-shuffle"></i> 랜덤</del>
			</button>
		</div>
		<div class="justify-content-between float-md-end">
			<button id="showVertical" class="btn btn-outline-secondary">
				<del>
					<i class="bi bi-view-stacked"></i>상하보기
				</del>
			</button>
			<button id="showHorizontal" class="btn btn-outline-secondary">
				<del>
					<i class="bi bi-vr"></i>좌우보기
				</del>
			</button>
		</div>
	</div>
</div>

    <div th:if=${session.id} layout:fragment="content">
		<!-- content -->
		<div th:if="${end} !=0">
		<div>
			<form th:action="|/testing/${workbook}|" method="post">
				<input type="hidden" name="workbook" th:value="${workbook}">
				<input type="hidden" name="current" th:value="${current}+1">
				<input type="hidden" th:name="|list[${listStat.index}]|" th:value="${list}" th:each="list, listStat : ${list}">
				<input type="hidden" name="problem" th:if="${item}" th:value="${item.id}">
				<input type="hidden" name="score" th:if="${score}" th:value="${score}">
				<input type="hidden" name="isRight" value="0">
				<input type="submit" value="오답">
			</form>
			<span th:text="${score}"></span><span>/</span><span th:text="${total}"></span>
			
			<form th:action="|/testing/${workbook}|" method="post">
				<input type="hidden" name="workbook" th:value="${workbook}">
				<input type="hidden" name="current" th:value="${current}+1">
				<input type="hidden" th:name="|list[${listStat.index}]|" th:value="${list}" th:each="list, listStat : ${list}">
				<input type="hidden" name="problem" th:if="${item}" th:value="${item.id}">
				<input type="hidden" name="score" th:if="${score}" th:value="${score}">
				<input type="hidden" name="isRight" value="1">
				<input type="submit" value="정답">
			</form>
		</div>
		<hr>
		<div th:if="${total}>0">
			<div th:if="${current} == 0">
				<form th:action="|/testing/${workbook}|" method="post">
					<input type="hidden" name="workbook" th:value="${workbook}">
					<input type="hidden" name="current" th:value="${current}+1">
					<input type="hidden" th:name="|list[${listStat.index}]|" th:value="${list}" th:each="list, listStat : ${list}">
					<input type="hidden" name="problem" th:if="${item}" th:value="${item.id}">
				<input type="hidden" name="score" th:if="${score}" th:value="${score}">
					<input type="hidden" name="isRight" value="1">
					<input type="submit" value="시작하기">
				</form>
			</div>
			<div th:if="${item}">
				<p>문제: <span th:text="${item.question}"></span></p>
				<p>정답: <span th:text="${item.answer}"></span></p>
			</div>
		</div>
		
		<div th:unless="${total}>0">
			문제가 없습니다.
		</div>
		</div>
		
		<div th:if="${end} == 0">
			<h3>학습 완료</h3>
			<a href="/record">기록으로 이동</a><br>
			<a href="/workbook/" th:attrappend="href=${workbook}">문제집으로 이동</a>
		</div>
	</div>
</html>
